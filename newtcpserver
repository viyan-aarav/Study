val = 123
local counter = 0
local socket = require 'socket.core'
local server = socket.tcp()
server:bind('*',arg[1])
server:listen(31)

local table = {}

print"listening"

while 1 do
  
  local client = server:accept ()
  local msg = "client number\n"
 
  local lin = client:receive()
  local lin2 = client:receive()
  local lin3 = client:receive()
  print("received: " .. lin)
while true  do
  counter = counter + 1
  print("sending: " ..msg)
  print("received: message details ")
  client:send("you are client number: \n")
  client:send(tostring(counter) .. "\n")
 client:send("send to & message: \n")
 client:send("from:\n")
table[lin] = lin2
print(lin2)
-- print(lin3)
-- client:send(lin .. "\n")
-- print(table[lin])
  break
end
end
